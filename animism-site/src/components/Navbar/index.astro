---
import styles from "./Navbar.module.css";
const { pages } = Astro.props;
---

<header class={styles.header}>
  <nav class={styles.nav}>
    <!-- Brand on the left -->
    <a class={styles.brand} href="/">The Encosmic Path</a>

    <!-- Hamburger toggle, hidden on desktop -->
    <button
      class={styles.toggle}
      aria-label="Toggle menu"
      client:load
      on:click={() => {
        const nav = document.querySelector(`.${styles.navList}`);
        nav.classList.toggle(styles.show);
      }}
    >
      â˜°
    </button>

    <!-- Collapsible list -->
    <ul class={`${styles.navList}`}>
      {pages.map((page) => (
        <li class={styles.navItemWrapper} data-slug={page.slug}>
          <a
            href={`/${page.slug}`}
            class={`${styles.navItem} ${page.children?.length ? styles.hasChildren : ""}`}
          >
            {page.title}
          </a>
          {page.children?.length > 0 && (
            <ul class={`${styles.dropdown} dropdown`} data-parent={page.slug}>
              {page.children.map((child) => (
                <li>
                  <a href={`/${child.slug}`} class={styles.navItem}>
                    {child.title}
                  </a>
                </li>
              ))}
            </ul>
          )}
        </li>
      ))}
      <li class={styles.navItemWrapper}>
        <a href="/library" class={styles.navItem}>The Library</a>
      </li>
    </ul>
  </nav>
</header>
